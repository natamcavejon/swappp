{"version":3,"file":"db.js","names":["mongoose","config","tokenStoreType","require","Promise","global","userAndPassword","db","mongodbUser","mongodbPassword","mongoIsRemote","connect","mongodbHost","mongodbPort","mongodbDatabase","useNewUrlParser","useUnifiedTopology","mongoURLRemote","module","exports"],"sources":["../../../../src/util/db/mongodb/db.js"],"sourcesContent":["//import mongoose from 'mongoose';\nimport config from '../../../config.json';\n\nlet mongoose = config.tokenStoreType === 'mongodb' ? require('mongoose') : null;\n\nif (config.tokenStoreType === 'mongodb') {\n  mongoose.Promise = global.Promise;\n  const userAndPassword =\n    config.db.mongodbUser && config.db.mongodbPassword ? `${config.db.mongodbUser}:${config.db.mongodbPassword}@` : '';\n\n  if (!config.db.mongoIsRemote) {\n    mongoose.connect(\n      `mongodb://${userAndPassword}${config.db.mongodbHost}:${config.db.mongodbPort}/${config.db.mongodbDatabase}`,\n      {\n        useNewUrlParser: true,\n        useUnifiedTopology: true,\n      }\n    );\n  } else {\n    mongoose.connect(config.db.mongoURLRemote, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n    });\n  }\n}\n\nmodule.exports = mongoose;\n"],"mappings":";AACA,sEAA0C,CAD1C;;AAGA,IAAIA,QAAQ,GAAGC,eAAM,CAACC,cAAc,KAAK,SAAS,GAAGC,OAAO,CAAC,UAAU,CAAC,GAAG,IAAI;;AAE/E,IAAIF,eAAM,CAACC,cAAc,KAAK,SAAS,EAAE;EACvCF,QAAQ,CAACI,OAAO,GAAGC,MAAM,CAACD,OAAO;EACjC,MAAME,eAAe;EACnBL,eAAM,CAACM,EAAE,CAACC,WAAW,IAAIP,eAAM,CAACM,EAAE,CAACE,eAAe,GAAI,GAAER,eAAM,CAACM,EAAE,CAACC,WAAY,IAAGP,eAAM,CAACM,EAAE,CAACE,eAAgB,GAAE,GAAG,EAAE;;EAEpH,IAAI,CAACR,eAAM,CAACM,EAAE,CAACG,aAAa,EAAE;IAC5BV,QAAQ,CAACW,OAAO;IACb,aAAYL,eAAgB,GAAEL,eAAM,CAACM,EAAE,CAACK,WAAY,IAAGX,eAAM,CAACM,EAAE,CAACM,WAAY,IAAGZ,eAAM,CAACM,EAAE,CAACO,eAAgB,EAAC;IAC5G;MACEC,eAAe,EAAE,IAAI;MACrBC,kBAAkB,EAAE;IACtB,CAAC,CACF;;EACH,CAAC,MAAM;IACLhB,QAAQ,CAACW,OAAO,CAACV,eAAM,CAACM,EAAE,CAACU,cAAc,EAAE;MACzCF,eAAe,EAAE,IAAI;MACrBC,kBAAkB,EAAE;IACtB,CAAC,CAAC;EACJ;AACF;;AAEAE,MAAM,CAACC,OAAO,GAAGnB,QAAQ"}