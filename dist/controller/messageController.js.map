{"version":3,"file":"messageController.js","names":["returnError","req","res","error","logger","status","json","message","returnSucess","data","response","mapper","sendMessage","phone","body","options","results","contato","push","client","sendText","length","io","emit","sendFile","path","base64","filename","caption","file","send","pathFile","msg","unlinkAsync","sendVoice","quotedMessageId","sendPtt","sendVoice64","base64Ptt","sendPttFromBase64","sendLinkPreview","url","sendLocation","lat","lng","title","address","name","sendButtons","contact","sendListMessage","description","sections","buttonText","sendPollMessage","choices","sendStatusText","replyMessage","messageId","reply","to","sendMentioned","mentioned","sendImageAsSticker","sendImageAsStickerGif"],"sources":["../../src/controller/messageController.js"],"sourcesContent":["/*\n * Copyright 2021 WPPConnect Team\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { unlinkAsync } from '../util/functions';\n\nfunction returnError(req, res, error) {\n  req.logger.error(error);\n  res.status(500).json({ status: 'Error', message: 'Erro ao enviar a mensagem.', error: error });\n}\n\nasync function returnSucess(res, data) {\n  res.status(201).json({ status: 'success', response: data, mapper: 'return' });\n}\n\nexport async function sendMessage(req, res) {\n  const { phone, message } = req.body;\n\n  const options = req.body.options || {};\n\n  try {\n    let results = [];\n    for (const contato of phone) {\n      results.push(await req.client.sendText(contato, message, options));\n    }\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    req.io.emit('mensagem-enviada', results);\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendFile(req, res) {\n  const { phone, path, base64, filename = 'file', message, caption } = req.body;\n\n  if (!path && !req.file && !base64)\n    return res.status(401).send({\n      message: 'Sending the file is mandatory',\n    });\n\n  const pathFile = path || base64 || req.file.path;\n  const msg = message || caption;\n\n  try {\n    let results = [];\n    for (const contato of phone) {\n      results.push(await req.client.sendFile(contato, pathFile, { filename: filename, caption: msg }));\n    }\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    if (req.file) await unlinkAsync(pathFile);\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendVoice(req, res) {\n  const { phone, path, filename = 'Voice Audio', message, quotedMessageId } = req.body;\n\n  try {\n    let results = [];\n    for (const contato of phone) {\n      results.push(await req.client.sendPtt(contato, path, filename, message, quotedMessageId));\n    }\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendVoice64(req, res) {\n  const { phone, base64Ptt } = req.body;\n\n  try {\n    let results = [];\n    for (const contato of phone) {\n      results.push(await req.client.sendPttFromBase64(contato, base64Ptt, 'Voice Audio'));\n    }\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendLinkPreview(req, res) {\n  const { phone, url, caption } = req.body;\n\n  try {\n    let results = [];\n    for (const contato of phone) {\n      results.push(await req.client.sendLinkPreview(`${contato}`, url, caption));\n    }\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendLocation(req, res) {\n  const { phone, lat, lng, title, address } = req.body;\n\n  try {\n    let results = [];\n    for (const contato of phone) {\n      results.push(await req.client.sendLocation(contato, { lat: lat, lng: lng, address: address, name: title }));\n    }\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendButtons(req, res) {\n  const { phone, message, options } = req.body;\n\n  try {\n    let results = [];\n\n    for (const contact of phone) {\n      results.push(await req.client.sendText(contact, message, options));\n    }\n\n    if (results.length === 0) return returnError(req, res, 'Error sending message with buttons');\n\n    returnSucess(res, phone, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendListMessage(req, res) {\n  const { phone, description = '', sections, buttonText = 'SELECIONE UMA OPÇÃO' } = req.body;\n\n  try {\n    let results = [];\n\n    for (const contact of phone) {\n      results.push(\n        await req.client.sendListMessage(contact, {\n          buttonText: buttonText,\n          description: description,\n          sections: sections,\n        })\n      );\n    }\n\n    if (results.length === 0) return returnError(req, res, 'Error sending list buttons');\n\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendPollMessage(req, res) {\n  const { phone, name, choices, options } = req.body;\n\n  try {\n    let results = [];\n\n    for (const contact of phone) {\n      results.push(await req.client.sendPollMessage(contact, name, choices, options));\n    }\n\n    if (results.length === 0) return returnError(req, res, 'Error sending poll message');\n\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendStatusText(req, res) {\n  const { message } = req.body;\n\n  try {\n    let results = [];\n    results.push(await req.client.sendText('status@broadcast', message));\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function replyMessage(req, res) {\n  const { phone, message, messageId } = req.body;\n\n  try {\n    let results = [];\n    for (const contato of phone) {\n      results.push(await req.client.reply(contato, message, messageId));\n    }\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    req.io.emit('mensagem-enviada', { message: message, to: phone });\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendMentioned(req, res) {\n  const { phone, message, mentioned } = req.body;\n\n  try {\n    let response;\n    for (const contato of phone) {\n      response = await req.client.sendMentioned(`${contato}`, message, mentioned);\n    }\n\n    return res.status(201).json({ status: 'success', response: response });\n  } catch (error) {\n    req.logger.error(error);\n    return res.status(500).json({ status: 'error', message: 'Error on send message mentioned', error: error });\n  }\n}\nexport async function sendImageAsSticker(req, res) {\n  const { phone, path } = req.body;\n\n  if (!path && !req.file)\n    return res.status(401).send({\n      message: 'Sending the file is mandatory',\n    });\n\n  const pathFile = path || req.file.path;\n\n  try {\n    let results = [];\n    for (const contato of phone) {\n      results.push(await req.client.sendImageAsSticker(contato, pathFile));\n    }\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    if (req.file) await unlinkAsync(pathFile);\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\nexport async function sendImageAsStickerGif(req, res) {\n  const { phone, path } = req.body;\n\n  if (!path && !req.file)\n    return res.status(401).send({\n      message: 'Sending the file is mandatory',\n    });\n\n  const pathFile = path || req.file.path;\n\n  try {\n    let results = [];\n    for (const contato of phone) {\n      results.push(await req.client.sendImageAsStickerGif(contato, pathFile));\n    }\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    if (req.file) await unlinkAsync(pathFile);\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n"],"mappings":"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"}