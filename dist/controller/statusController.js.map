{"version":3,"file":"statusController.js","names":["returnError","req","res","error","logger","status","json","message","returnSucess","data","response","mapper","sendTextStorie","text","options","body","send","results","push","client","sendTextStatus","length","sendImageStorie","path","file","pathFile","sendImageStatus","sendVideoStorie","sendVideoStatus","unlinkAsync"],"sources":["../../src/controller/statusController.js"],"sourcesContent":["import { unlinkAsync } from '../util/functions';\n\nfunction returnError(req, res, error) {\n  req.logger.error(error);\n  res.status(500).json({ status: 'Error', message: 'Erro ao enviar status.', error: error });\n}\n\nasync function returnSucess(res, data) {\n  res.status(201).json({ status: 'success', response: data, mapper: 'return' });\n}\n\nexport async function sendTextStorie(req, res) {\n  const { text, options } = req.body;\n\n  if (!text)\n    return res.status(401).send({\n      message: 'Text was not informed',\n    });\n\n  try {\n    let results = [];\n    results.push(await req.client.sendTextStatus(text, options));\n\n    if (results.length === 0) return res.status(400).json('Error sending the text of stories');\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendImageStorie(req, res) {\n  const { path, options } = req.body;\n\n  if (!path && !req.file)\n    return res.status(401).send({\n      message: 'Sending the image is mandatory',\n    });\n\n  const pathFile = path || req.file.path;\n\n  try {\n    let results = [];\n    results.push(await req.client.sendImageStatus(pathFile, options));\n\n    if (results.length === 0) return res.status(400).json('Error sending the image of stories');\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n\nexport async function sendVideoStorie(req, res) {\n  const { path } = req.body;\n\n  if (!path && !req.file)\n    return res.status(401).send({\n      message: 'Sending the Video is mandatory',\n    });\n\n  const pathFile = path || req.file.path;\n\n  try {\n    let results = [];\n\n    results.push(await req.client.sendVideoStatus(pathFile));\n\n    if (results.length === 0) return res.status(400).json('Error sending message');\n    if (req.file) await unlinkAsync(pathFile);\n    returnSucess(res, results);\n  } catch (error) {\n    returnError(req, res, error);\n  }\n}\n"],"mappings":"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"}