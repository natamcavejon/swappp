{"version":3,"file":"index.js","names":["convert","prefix","data","event","indexOf","mappConfEvent","config_event","mappConfType","config_type","type","Object","assign","mapper","e","default","mappConf","undefined"],"sources":["../../src/mapper/index.js"],"sourcesContent":["import mapper from 'json-mapper-json';\n\nexport async function convert(prefix, data, event) {\n  try {\n    data.event = event || data.event;\n    event = data.event.indexOf('message') >= 0 ? 'message' : data.event;\n\n    let mappConfEvent = await config_event(prefix, event);\n    let mappConfType = await config_type(prefix, event, data.type);\n\n    Object.assign(mappConfEvent, mappConfType);\n\n    // console.log('mappConfEvent', mappConfEvent);\n\n    if (!mappConfEvent) return data;\n    return await mapper(data, mappConfEvent);\n  } catch (e) {\n    return data;\n  }\n}\n\nasync function config_event(prefix, event) {\n  try {\n    let { default: mappConf } = await import(`./${prefix}${event}.js`);\n    if (!mappConf) return undefined;\n    return mappConf;\n  } catch (e) {\n    return undefined;\n  }\n}\n\nasync function config_type(prefix, event, type) {\n  try {\n    let { default: mappConf } = await import(`./${prefix}${event}-${type}.js`);\n    if (!mappConf) return undefined;\n    return mappConf;\n  } catch (e) {\n    return undefined;\n  }\n}\n"],"mappings":"0LAAA,0EAAsC;;AAE/B,eAAeA,OAAO,CAACC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAE;EACjD,IAAI;IACFD,IAAI,CAACC,KAAK,GAAGA,KAAK,IAAID,IAAI,CAACC,KAAK;IAChCA,KAAK,GAAGD,IAAI,CAACC,KAAK,CAACC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,SAAS,GAAGF,IAAI,CAACC,KAAK;;IAEnE,IAAIE,aAAa,GAAG,MAAMC,YAAY,CAACL,MAAM,EAAEE,KAAK,CAAC;IACrD,IAAII,YAAY,GAAG,MAAMC,WAAW,CAACP,MAAM,EAAEE,KAAK,EAAED,IAAI,CAACO,IAAI,CAAC;;IAE9DC,MAAM,CAACC,MAAM,CAACN,aAAa,EAAEE,YAAY,CAAC;;IAE1C;;IAEA,IAAI,CAACF,aAAa,EAAE,OAAOH,IAAI;IAC/B,OAAO,MAAM,IAAAU,uBAAM,EAACV,IAAI,EAAEG,aAAa,CAAC;EAC1C,CAAC,CAAC,OAAOQ,CAAC,EAAE;IACV,OAAOX,IAAI;EACb;AACF;;AAEA,eAAeI,YAAY,CAACL,MAAM,EAAEE,KAAK,EAAE;EACzC,IAAI;IACF,IAAI,EAAEW,OAAO,EAAEC,QAAQ,CAAC,CAAC,GAAG,yGAAc,KAAId,MAAO,GAAEE,KAAM,KAAI,CAAC;IAClE,IAAI,CAACY,QAAQ,EAAE,OAAOC,SAAS;IAC/B,OAAOD,QAAQ;EACjB,CAAC,CAAC,OAAOF,CAAC,EAAE;IACV,OAAOG,SAAS;EAClB;AACF;;AAEA,eAAeR,WAAW,CAACP,MAAM,EAAEE,KAAK,EAAEM,IAAI,EAAE;EAC9C,IAAI;IACF,IAAI,EAAEK,OAAO,EAAEC,QAAQ,CAAC,CAAC,GAAG,yGAAc,KAAId,MAAO,GAAEE,KAAM,IAAGM,IAAK,KAAI,CAAC;IAC1E,IAAI,CAACM,QAAQ,EAAE,OAAOC,SAAS;IAC/B,OAAOD,QAAQ;EACjB,CAAC,CAAC,OAAOF,CAAC,EAAE;IACV,OAAOG,SAAS;EAClB;AACF"}